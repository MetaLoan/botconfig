# ğŸ¤– Bot å·¥ä½œåŸç†è¯¦è§£

## é—®é¢˜ï¼šç”¨æˆ·ç‚¹å‡»/startæ—¶ï¼Œæ¶ˆæ¯ä»å“ªé‡Œæ¥ï¼Ÿ

**ç­”æ¡ˆï¼šä»ä½ çš„æœåŠ¡å™¨å®æ—¶ç”Ÿæˆå¹¶å‘é€çš„ï¼**

---

## ğŸ“¡ å®Œæ•´å·¥ä½œæµç¨‹

### 1. ç”¨æˆ·æ“ä½œ
```
ç”¨æˆ·åœ¨Telegramä¸­ï¼š
1. æœç´¢ @futureXdotcome_bot
2. ç‚¹å‡» Start æˆ–å‘é€ /start
```

### 2. TelegramæœåŠ¡å™¨
```
TelegramæœåŠ¡å™¨ï¼š
1. æ¥æ”¶ç”¨æˆ·çš„ /start æ¶ˆæ¯
2. æŸ¥æ‰¾è¿™ä¸ªBotçš„æœåŠ¡å™¨åœ°å€
3. å‘é€æ¶ˆæ¯åˆ°ä½ çš„BotæœåŠ¡å™¨
```

### 3. ä½ çš„BotæœåŠ¡å™¨ï¼ˆå…³é”®ï¼ï¼‰
```javascript
// bot-multi.mjs ä¸­çš„ä»£ç 

// æ­¥éª¤1ï¼šæ¥æ”¶æ¶ˆæ¯
async function handleMessage(token, webappUrl, message) {
  const text = message.text ?? "";
  
  // æ­¥éª¤2ï¼šæ£€æµ‹åˆ° /start
  if (text.startsWith("/start")) {
    
    // æ­¥éª¤3ï¼šç”Ÿæˆå“åº”ï¼ˆä½ å¯ä»¥ä¿®æ”¹è¿™é‡Œï¼ï¼‰
    const { text: msgText, reply_markup } = buildStartMessage(webappUrl);
    
    // æ­¥éª¤4ï¼šå‘é€å›Telegram
    await tg(token, "sendMessage", {
      chat_id: chatId,
      text: msgText,
      reply_markup,
    });
  }
}

// è¿™ä¸ªå‡½æ•°ç”Ÿæˆæ¬¢è¿æ¶ˆæ¯ï¼ˆä½ å¯ä»¥éšæ—¶ä¿®æ”¹ï¼ï¼‰
function buildStartMessage(webappUrl) {
  const text = "Welcome to the Academy of Crypto..."; // â† åœ¨è¿™é‡Œ
  
  const reply_markup = {
    inline_keyboard: [
      [{ text: "ğŸ“š Start Learning", callback_data: "menu:main" }], // â† æŒ‰é’®1
      [{ text: "ğŸŒ Open Full Academy", web_app: { url: webappUrl } }] // â† æŒ‰é’®2
    ]
  };
  
  return { text, reply_markup };
}
```

### 4. TelegramæœåŠ¡å™¨ï¼ˆè¿”å›ï¼‰
```
TelegramæœåŠ¡å™¨ï¼š
1. æ¥æ”¶ä½ æœåŠ¡å™¨å‘æ¥çš„å“åº”
2. å°†æ¶ˆæ¯æ¨é€ç»™ç”¨æˆ·
```

### 5. ç”¨æˆ·çœ‹åˆ°
```
ç”¨æˆ·åœ¨Telegramä¸­çœ‹åˆ°ï¼š
- æ¬¢è¿æ¶ˆæ¯
- ä¸¤ä¸ªæŒ‰é’®
```

---

## ğŸ” å…³é”®åŒºåˆ«

### âŒ ä¸æ˜¯ç¡¬ç¼–ç åœ¨Telegram

```
é”™è¯¯ç†è§£ï¼š
ç”¨æˆ·ç‚¹/start â†’ TelegramæœåŠ¡å™¨ç›´æ¥è¿”å›å›ºå®šæ¶ˆæ¯

âŒ è¿™æ ·çš„è¯ï¼š
- æ— æ³•ä¿®æ”¹æ¶ˆæ¯
- æ— æ³•æ ¹æ®ç”¨æˆ·ä¸ªæ€§åŒ–
- æ— æ³•å®ç°å¤æ‚äº¤äº’
```

### âœ… æ˜¯ä½ çš„æœåŠ¡å™¨å®æ—¶å¤„ç†

```
æ­£ç¡®ç†è§£ï¼š
ç”¨æˆ·ç‚¹/start â†’ Telegramè½¬å‘ç»™ä½ çš„æœåŠ¡å™¨ â†’ ä½ çš„ä»£ç å¤„ç† â†’ è¿”å›å“åº”

âœ… è¿™æ ·çš„è¯ï¼š
- å¯ä»¥éšæ—¶ä¿®æ”¹æ¶ˆæ¯
- å¯ä»¥æ ¹æ®ç”¨æˆ·ã€æ—¶é—´ã€VIPç­‰çº§è¿”å›ä¸åŒå†…å®¹
- å¯ä»¥å®ç°å¤æ‚çš„å­¦ä¹ ç³»ç»Ÿã€æ¸¸æˆã€å•†åŸç­‰
```

---

## ğŸ’¡ å®é™…ä¾‹å­

### ä¾‹å­1ï¼šæ ¹æ®æ—¶é—´è¿”å›ä¸åŒæ¶ˆæ¯

```javascript
function buildStartMessage(webappUrl) {
  const hour = new Date().getHours();
  let greeting;
  
  if (hour < 12) {
    greeting = "Good morning! â˜€ï¸";
  } else if (hour < 18) {
    greeting = "Good afternoon! ğŸŒ¤ï¸";
  } else {
    greeting = "Good evening! ğŸŒ™";
  }
  
  const text = `${greeting}\n\nWelcome to the Academy of Crypto...`;
  // ...
}
```

**æ•ˆæœï¼š** ç”¨æˆ·åœ¨ä¸åŒæ—¶é—´ç‚¹/startï¼Œçœ‹åˆ°ä¸åŒçš„é—®å€™è¯­ï¼

### ä¾‹å­2ï¼šæ ¹æ®ç”¨æˆ·è¿”å›ä¸åŒå†…å®¹

```javascript
async function handleMessage(token, webappUrl, message) {
  const userId = message.from?.id;
  const chatId = message.chat?.id;
  
  if (text.startsWith("/start")) {
    // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦æ˜¯VIP
    const isVIP = await checkVIPStatus(userId);
    
    let msgText;
    if (isVIP) {
      msgText = "ğŸŒŸ VIPç”¨æˆ·ï¼Œæ¬¢è¿å›æ¥ï¼\n\næ‚¨æœ‰ä¸“å±è¯¾ç¨‹ç­‰å¾…å­¦ä¹ ...";
    } else {
      msgText = "Welcome to the Academy of Crypto...";
    }
    
    await tg(token, "sendMessage", {
      chat_id: chatId,
      text: msgText,
      // ...
    });
  }
}
```

**æ•ˆæœï¼š** VIPç”¨æˆ·çœ‹åˆ°ä¸“å±æ¬¢è¿æ¶ˆæ¯ï¼

---

## ğŸ”§ ä»€ä¹ˆå¯ä»¥ä¿®æ”¹ï¼Ÿä»€ä¹ˆä¸èƒ½ï¼Ÿ

### âœ… å¯ä»¥é€šè¿‡ä»£ç éšæ—¶ä¿®æ”¹ï¼ˆä½ çš„æœåŠ¡å™¨ï¼‰

| å†…å®¹ | ä½ç½® | ä¿®æ”¹æ–¹å¼ |
|------|------|----------|
| æ¬¢è¿æ¶ˆæ¯æ–‡å­— | `buildStartMessage()` | æ”¹ä»£ç  â†’ é‡å¯ |
| æŒ‰é’®æ–‡å­— | `reply_markup` | æ”¹ä»£ç  â†’ é‡å¯ |
| æŒ‰é’®æ•°é‡ | `inline_keyboard` | æ”¹ä»£ç  â†’ é‡å¯ |
| è¯¾ç¨‹å†…å®¹ | `course-content.mjs` | æ”¹ä»£ç  â†’ é‡å¯ |
| æ‰€æœ‰äº¤äº’é€»è¾‘ | `handleMessage()` | æ”¹ä»£ç  â†’ é‡å¯ |
| æ¡ä»¶åˆ¤æ–­ | ä»»æ„å‡½æ•° | æ”¹ä»£ç  â†’ é‡å¯ |

### âŒ éœ€è¦é€šè¿‡BotFatherä¿®æ”¹ï¼ˆTelegramæœåŠ¡å™¨ï¼‰

| å†…å®¹ | ä¿®æ”¹æ–¹å¼ |
|------|----------|
| Botåç§° | @BotFather â†’ Edit Bot â†’ Edit Name |
| Botç”¨æˆ·å | åˆ›å»ºæ—¶è®¾å®šï¼Œä¸èƒ½ä¿®æ”¹ |
| Botå¤´åƒ | @BotFather â†’ Edit Bot â†’ Edit Botpic |
| Botæè¿° | @BotFather â†’ Edit Bot â†’ Edit Description |
| å‘½ä»¤åˆ—è¡¨ï¼ˆ/helpç­‰ï¼‰ | @BotFather â†’ Edit Bot â†’ Edit Commands |

---

## ğŸ¯ å®é™…åº”ç”¨

### åœºæ™¯1ï¼šä¿®æ”¹æ¬¢è¿æ¶ˆæ¯

**éœ€æ±‚ï¼š** ä¿®æ”¹æ¬¢è¿æ–‡æ¡ˆ

```bash
# 1. ç¼–è¾‘ä»£ç 
vim bot-multi.mjs
# ä¿®æ”¹ç¬¬56è¡Œçš„textå˜é‡

# 2. é‡å¯
./restart-multi-bot.sh

# 3. ç«‹å³ç”Ÿæ•ˆï¼
# æ‰€æœ‰15ä¸ªBotçš„æ¬¢è¿æ¶ˆæ¯éƒ½æ”¹äº†
```

### åœºæ™¯2ï¼šæ·»åŠ ç¬¬ä¸‰ä¸ªæŒ‰é’®

```javascript
const reply_markup = {
  inline_keyboard: [
    [{ text: "ğŸ“š Start Learning", callback_data: "menu:main" }],
    [{ text: "ğŸŒ Open Full Academy", web_app: { url: webappUrl } }],
    [{ text: "ğŸ Special Offer", callback_data: "offer" }] // â† æ–°æŒ‰é’®
  ]
};
```

**ä¿®æ”¹ â†’ é‡å¯ â†’ ç«‹å³ç”Ÿæ•ˆ**

### åœºæ™¯3ï¼šæ”¹å˜æŒ‰é’®åŠŸèƒ½

ä¸éœ€è¦æ”¹Telegramä»»ä½•è®¾ç½®ï¼Œåªæ”¹ä½ çš„ä»£ç ä¸­çš„ `callback_data` æˆ– `web_app.url`ã€‚

---

## ğŸ“Š æ•°æ®æµå‘å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ç”¨æˆ·è®¾å¤‡   â”‚
â”‚  (Telegram)  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 1. ç‚¹å‡»/start
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Telegram   â”‚
â”‚   æœåŠ¡å™¨     â”‚  â† åªåšè½¬å‘ï¼Œä¸å­˜å‚¨ä½ çš„æ¶ˆæ¯å†…å®¹
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 2. è½¬å‘æ¶ˆæ¯
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä½ çš„æœåŠ¡å™¨  â”‚
â”‚ (bot-multi) â”‚  â† è¿™é‡Œç”Ÿæˆæ‰€æœ‰å†…å®¹ï¼
â”‚             â”‚
â”‚ - æ¥æ”¶ /start
â”‚ - æ‰§è¡Œä»£ç 
â”‚ - ç”Ÿæˆæ¶ˆæ¯
â”‚ - è¿”å›å“åº”
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 3. å‘é€å“åº”
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Telegram   â”‚
â”‚   æœåŠ¡å™¨     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 4. æ¨é€ç»™ç”¨æˆ·
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ç”¨æˆ·çœ‹åˆ°   â”‚
â”‚  æ¶ˆæ¯+æŒ‰é’®   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ æ€»ç»“

1. **æ‰€æœ‰æ¶ˆæ¯éƒ½æ˜¯ä½ çš„æœåŠ¡å™¨å®æ—¶ç”Ÿæˆçš„**
   - ä¸æ˜¯ç¡¬ç¼–ç åœ¨Telegram
   - å®Œå…¨ç”±ä½ çš„ä»£ç æ§åˆ¶

2. **ä¿®æ”¹éå¸¸ç®€å•**
   - æ”¹ä»£ç  â†’ é‡å¯ â†’ ç«‹å³ç”Ÿæ•ˆ
   - ä¸éœ€è¦é€šè¿‡BotFather

3. **å¯ä»¥å®ç°å¤æ‚åŠŸèƒ½**
   - ä¸ªæ€§åŒ–æ¶ˆæ¯
   - æ¡ä»¶åˆ¤æ–­
   - æ•°æ®åº“æŸ¥è¯¢
   - åŠ¨æ€å†…å®¹

4. **Telegramåªå­˜å‚¨åŸºæœ¬ä¿¡æ¯**
   - Botåç§°ã€ç”¨æˆ·åã€å¤´åƒ
   - è¿™äº›é€šè¿‡BotFatherè®¾ç½®

5. **ä½ æ§åˆ¶æ‰€æœ‰äº¤äº’é€»è¾‘**
   - æ¶ˆæ¯ã€æŒ‰é’®ã€è¯¾ç¨‹ã€æ‰€æœ‰å†…å®¹
   - è¿™äº›åœ¨ä½ çš„ä»£ç ä¸­

---

**è¿™å°±æ˜¯ä¸ºä»€ä¹ˆBotå¯ä»¥å¦‚æ­¤çµæ´»å’Œå¼ºå¤§ï¼** ğŸš€

